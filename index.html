<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Par-delà des murs</title>
    <!-- Favicon -->
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <!-- Police Google : Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
      /* RESET & VARIABLES */
      *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
      :root{
        --clr-bg:#fff;
        --clr-text:#1a1a1a;
        --clr-muted:#666;

        /* Palette */
        --clr-primary-light:#8ECAE6;
        --clr-primary:#219EBC;
        --clr-primary-dark:#023047;

        --spacing:2rem;
        font-family:'Inter',sans-serif;
        line-height:1.5;
      }
      body{background:var(--clr-bg);color:var(--clr-text);}

      /* NAVBAR */
      .navbar{
        display:flex;align-items:center;justify-content:space-between;
        padding:1rem var(--spacing);
        position:sticky;top:0;background:var(--clr-bg);
        border-bottom:1px solid #eaeaea;z-index:1000;
      }
      .logo{display:flex;align-items:center;gap:.75rem;font-weight:700;font-size:1.15rem;text-transform:uppercase;letter-spacing:.02em;}
      .logo img{width:40px;height:40px;}
      .burger{background:none;border:none;cursor:pointer;display:flex;flex-direction:column;justify-content:center;gap:6px;padding:0;width:32px;height:32px;z-index:1100;}
      .burger span{display:block;width:100%;height:3px;background:var(--clr-text);transition:.3s;}
      .burger.active span:nth-child(1){transform:translateY(9px) rotate(45deg);}
      .burger.active span:nth-child(2){opacity:0;}
      .burger.active span:nth-child(3){transform:translateY(-9px) rotate(-45deg);}
      .nav-links{
        position:fixed;top:0;right:0;bottom:0;width:70%;max-width:300px;background:var(--clr-bg);
        padding:5rem 2rem;display:flex;flex-direction:column;gap:1.5rem;
        transform:translateX(100%);transition:transform .35s cubic-bezier(.4,.0,.2,1);
      }
      .nav-links.open{transform:translateX(0);}
      .nav-links a{color:var(--clr-text);text-decoration:none;font-weight:500;font-size:1rem;}
      .nav-links a:hover{color:var(--clr-primary-dark);}

      /* Champ de recherche (navbar) */
      .search{
        border:1px solid #eaeaea;border-radius:6px;padding:.4rem .6rem;
        max-width:260px;width:100%;background:#fff;color:#1a1a1a;margin-right:.75rem;
      }
      .search:focus{outline:2px solid var(--clr-primary-light); outline-offset:2px;}

      /* LAYOUT */
      .container{
        /* large mais responsive : jusqu'à 1800px max, sinon 95% de la fenêtre */
        max-width:95vw;
        margin:0 auto;
        padding:var(--spacing);
      }

      /* CARTES / LISTES */
      .post-card{margin-bottom:var(--spacing);}
      .post-card img{width:100%;height:auto;border-radius:6px;}
      .post-card h2{font-size:1.75rem;margin:1rem 0 .5rem;}
      .post-card p.meta{color:var(--clr-muted);font-size:.9rem;margin-bottom:.75rem;}
      .post-card p.excerpt{margin-bottom:.75rem;}

      /* Bouton action */
      .btn-read{
        display:inline-block;padding:.5rem 1rem;
        background:var(--clr-primary-dark);color:#fff;border-radius:6px;
        text-decoration:none;font-size:.9rem;transition:.2s;
      }
      .btn-read:hover{background:var(--clr-primary);}
      .btn-read:focus{outline:2px solid var(--clr-primary-light);outline-offset:2px;}

      /* TITRES DE SECTION */
      .section-title{
        font-size:2rem;margin-bottom:1rem;border-bottom:1px solid #eaeaea;padding-bottom:.5rem;
      }

      /* FOOTER */
      footer{border-top:1px solid #eaeaea;padding:1.5rem var(--spacing);font-size:.85rem;color:var(--clr-muted);text-align:center;margin-top:3rem;}
    </style>
  </head>

  <body>
    <header class="navbar">
      <div class="logo">
        <img src="logo.svg" alt="Au-delà des murs logo" />
        <span>Par-delà des murs</span>
      </div>

      <input id="search" class="search" type="search" placeholder="Rechercher une review…" aria-label="Recherche">

      <button class="burger" id="burger" aria-label="Menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>

      <nav class="nav-links" id="navLinks">
        <a href="index.html">Blog</a>
        <a href="projets.html">Projets</a>
        <a href="about.html">À propos</a>
      </nav>
    </header>

    <main>
      <!-- SECTION 1 : REVIEWS (6 dernières) -->
      <section id="reviews" class="container">
        <h2 class="section-title">
          REVIEWS
          <small id="searchCount" style="font-size:.95rem;color:var(--clr-muted);font-weight:400;margin-left:.5rem"></small>
        </h2>
        <div id="reviewsGrid" style="display:grid;gap:1.25rem;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));">
          <!-- cartes injectées -->
        </div>
      </section>

      <!-- SECTION 2 : 10 DERNIÈRES NOTES (carrousel horizontal) -->
<section id="notes" class="container" style="margin-top:2rem">
  <h2 class="section-title" style="font-size:1.5rem">LES 10 DERNIÈRES NOTES</h2>

  <div style="position:relative">
    <button class="scrollLeftNotes" aria-label="Précédent"
      style="position:absolute;left:-6px;top:42%;transform:translateY(-50%);
             border:none;background:#fff;border:1px solid #eaeaea;border-radius:50%;
             width:36px;height:36px;cursor:pointer">‹</button>

    <!-- carrousel avec flexbox -->
    <div id="notesScroller"
         style="display:flex;gap:1rem;overflow-x:auto;padding-bottom:.5rem;
                scroll-snap-type:x mandatory;">
      <!-- cartes injectées par JS -->
    </div>

    <button class="scrollRightNotes" aria-label="Suivant"
      style="position:absolute;right:-6px;top:42%;transform:translateY(-50%);
             border:none;background:#fff;border:1px solid #eaeaea;border-radius:50%;
             width:36px;height:36px;cursor:pointer">›</button>
  </div>
</section>

      <!-- SECTION 3 : FILMS PRÉFÉRÉS (carrousel illimité) -->
      <section id="favorites" class="container" style="margin-top:2rem">
        <h2 class="section-title" style="font-size:1.5rem">MES FILMS PRÉFÉRÉS</h2>

        <div style="position:relative">
          <button class="scrollLeftFav" aria-label="Précédent"
            style="position:absolute;left:-6px;top:42%;transform:translateY(-50%);border:none;background:#fff;border:1px solid #eaeaea;border-radius:50%;width:36px;height:36px;cursor:pointer">‹</button>

          <div id="favScroller"
               style="display:grid;grid-auto-flow:column;grid-auto-columns:minmax(160px, 220px);gap:1rem;overflow-x:auto;padding-bottom:.5rem;scroll-snap-type:x mandatory;">
            <!-- posters injectés -->
          </div>

          <button class="scrollRightFav" aria-label="Suivant"
            style="position:absolute;right:-6px;top:42%;transform:translateY(-50%);border:none;background:#fff;border:1px solid #eaeaea;border-radius:50%;width:36px;height:36px;cursor:pointer">›</button>
        </div>
      </section>
    </main>

    <footer>
      © <span id="year"></span> Par-delà des murs – Tous droits réservés.
    </footer>

    <script>
      /* === Burger === */
      const burger = document.getElementById('burger');
      const navLinks = document.getElementById('navLinks');
      burger.addEventListener('click', () => {
        const open = burger.classList.toggle('active');
        navLinks.classList.toggle('open');
        burger.setAttribute('aria-expanded', open);
      });

      /* === Données d'exemple (remplace par les tiennes) === */
      const reviews = [
        { title:'Rembrandt', date:'2025-09-24', image:'assets/rembrandt.jpg',  excerpt:'Note rapide sur le film Rembrandt…', url:'posts/rembrandt.html',  tags:['review','cinéma français'] },
        { title:'Anatomie d’une chute', date:'2025-09-23', image:'assets/anatomie.jpg', excerpt:'Retour critique sur la Palme…', url:'posts/anatomie.html', tags:['review','palme'] },
        { title:'Benedetta', date:'2025-09-22', image:'assets/benedetta.jpg', excerpt:'Quelques lignes sur Benedetta…', url:'posts/benedetta.html', tags:['review','verhoeven'] }
        // …ajoute autant d’entrées que tu veux
      ];

      const notes = [
    { title:'Chungking Express', stars:4.5, image:'assets/chungking.jpg', url:'posts/chungking.html', date:'2025-09-28' },
    { title:'Benedetta',         stars:3,   image:'assets/benedetta.jpg', url:'posts/benedetta.html', date:'2025-09-22' },
    { title:'Rembrandt',         stars:1.5, image:'assets/rembrandt.jpg', url:'posts/rembrandt.html', date:'2025-09-24' },
    { title:'Anatomy of a Fall', stars:3.5, image:'assets/anatomie.jpg',  url:'posts/anatomie.html',  date:'2025-09-23' },
    { title:'Caught Stealing',   stars:3,   image:'assets/caughtstealing.jpg', url:'posts/caughtstealing.html', date:'2025-09-24' },
    { title:'Paris, Texas',      stars:3.5, image:'assets/paristexas.jpg',    url:'posts/paristexas.html',     date:'2025-09-23' },
    { title:'Late Shift',        stars:3.5, image:'assets/lateshift.jpg',     url:'posts/lateshift.html',      date:'2025-09-22' },
    { title:'Little Miss Sunshine', stars:4, image:'assets/littlemiss.jpg',   url:'posts/littlemiss.html',     date:'2025-09-24' },
    { title:'Yi Yi',             stars:3.5, image:'assets/yiyi.jpg',          url:'posts/yiyi.html',           date:'2025-09-23' },
    { title:'Citizen Kane',      stars:4,   image:'assets/citizenkane.jpg',   url:'posts/citizenkane.html',    date:'2025-09-23' }
    ];

      const favorites = [
        { title:'Tokyo Story',                image:'assets/p-tokyostory.jpg',       url:'#' },
        { title:'Perfect Days',               image:'assets/p-perfect-days.jpg',      url:'#' },
        { title:'Chungking Express',            image:'assets/p-chungking.jpg',      url:'#' },
        { title:'Le vent se lève',            image:'assets/p-vent.jpg',      url:'#' },
        { title:'Pierrot le Fou',             image:'assets/p-pierrot.jpg',           url:'#' },
        { title:'Le tombeau des lucioles',    image:'assets/p-grave.jpg',   url:'#' }
      ];

      /* === Helpers === */
      const fmtDate = d => new Date(d).toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric'});
      const makeStars = n => {
        const full = Math.floor(n), half = (n % 1) >= 0.5 ? 1 : 0, empty = 5 - full - half;
        return '★'.repeat(full) + (half ? '⯪' : '') + '☆'.repeat(empty);
      };

      /* === Render REVIEWS === */
      function renderReviews(list){
        const grid = document.getElementById('reviewsGrid');
        grid.innerHTML = '';
        const data = [...list].sort((a,b)=> new Date(b.date)-new Date(a.date)).slice(0,6);
        data.forEach(p=>{
          const card = document.createElement('article');
          card.className = 'post-card';
          card.innerHTML = `
            <img src="${p.image}" alt="${p.title}" style="width:100%;height:auto;border-radius:6px;">
            <h3 style="font-size:1.15rem;margin:.75rem 0 .25rem">${p.title}</h3>
            <p class="meta" style="color:var(--clr-muted);font-size:.9rem;margin-bottom:.4rem">${fmtDate(p.date)}</p>
            <p class="excerpt" style="margin-bottom:.6rem">${p.excerpt ?? ''}</p>
            <a href="${p.url}" class="btn-read">Lire</a>
          `;
          grid.appendChild(card);
        });
      }

   /* === Render NOTES (carrousel) === */
function renderNotes(){
  const rail = document.getElementById('notesScroller');
  rail.innerHTML = '';
  const data = [...notes].sort((a,b)=> new Date(b.date)-new Date(a.date)).slice(0,10);

  data.forEach(n=>{
    const card = document.createElement('a');
    card.href = n.url;
    card.style.cssText = `
      position:relative;
      flex:0 0 auto;   /* largeur auto en fonction de l’image */
      border-radius:8px;
      overflow:hidden;
      scroll-snap-align:start;
      text-decoration:none;
      color:#fff;
      background:#000;
    `;

    card.innerHTML = `
      <img src="${n.image}" alt="${n.title}"
           style="height:60vh;width:auto;display:block;transition:transform .4s ease;">
      <div style="position:absolute;top:12px;left:12px;z-index:2">
        <h3 style="margin:4px 0 4px;font-size:3rem;font-weight:700;
                   text-shadow:0 1px 3px rgba(0,0,0,.6)">
          ${n.title}
        </h3>
        <div style="font-size:1.5rem;font-weight:600;text-shadow:0 1px 3px rgba(0,0,0,.6)">
          ${makeStars(n.stars)}
        </div>
      </div>
    `;

    // Effet hover : zoom léger
    card.addEventListener('mouseenter', () => {
      card.querySelector('img').style.transform = 'scale(1.05)';
    });
    card.addEventListener('mouseleave', () => {
      card.querySelector('img').style.transform = 'scale(1)';
    });

    rail.appendChild(card);
  });
}


      /* === Render FAVORITES === */
      function renderFavorites(){
        const rail = document.getElementById('favScroller');
        rail.innerHTML = '';
        favorites.forEach(f=>{
          const card = document.createElement('a');
          card.href = f.url;
          card.title = f.title;
          card.style.cssText = 'scroll-snap-align:start;display:block;border-radius:6px;overflow:hidden;border:1px solid #eaeaea;background:#fff';
          card.innerHTML = `
            <div style="aspect-ratio:2/3;background:#f5f5f5">
              <img src="${f.image}" alt="${f.title}" style="width:100%;height:100%;object-fit:cover;display:block">
            </div>
            <div style="padding:.5rem .6rem;color:#333;font-size:.95rem">${f.title}</div>
          `;
          rail.appendChild(card);
        });
      }

      /* === Recherche (filtre REVIEWS) === */
      const searchInput = document.getElementById('search');
      const searchCount = document.getElementById('searchCount');
      function applySearch(){
        const q = (searchInput.value || '').trim().toLowerCase();
        if(!q){ searchCount.textContent=''; return renderReviews(reviews); }
        const filtered = reviews.filter(p => {
          const hay = [p.title, p.excerpt, ...(p.tags||[])].join(' ').toLowerCase();
          return hay.includes(q);
        });
        searchCount.textContent = `— ${filtered.length} résultat(s)`;
        renderReviews(filtered);
      }
      if(searchInput){ searchInput.addEventListener('input', applySearch); }

      /* === Boutons de scroll des carrousels === */
      function wireScrollers(){
        const nRail = document.getElementById('notesScroller');
        const fRail = document.getElementById('favScroller');
        document.querySelector('.scrollLeftNotes') .addEventListener('click', ()=> nRail.scrollBy({left: -nRail.clientWidth*0.9, behavior:'smooth'}));
        document.querySelector('.scrollRightNotes').addEventListener('click', ()=> nRail.scrollBy({left:  nRail.clientWidth*0.9, behavior:'smooth'}));
        document.querySelector('.scrollLeftFav')   .addEventListener('click', ()=> fRail.scrollBy({left: -fRail.clientWidth*0.9, behavior:'smooth'}));
        document.querySelector('.scrollRightFav')  .addEventListener('click', ()=> fRail.scrollBy({left:  fRail.clientWidth*0.9, behavior:'smooth'}));
      }

      /* === Boot === */
      reviews.sort((a,b)=> new Date(b.date)-new Date(a.date));
      renderReviews(reviews);
      renderNotes();
      renderFavorites();
      wireScrollers();

      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </body>
</html>
